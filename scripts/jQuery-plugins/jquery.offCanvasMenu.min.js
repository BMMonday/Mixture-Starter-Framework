!function(e,n,t,i){function s(n,t){this.element=n,this.settings=e.extend({},u,t),this._defaults=u,this._name=c,this.init()}var a,l,o,d,r,c="offCanvas",u={copyType:"clone",side:"left",target:"body",titleText:"Menu",toggleIcon:null,iconOnly:!1,hiddenClass:"hideMenu",idSuffix:"-ocClone",pushElems:null,menuWidth:"80%",animSpeed:"400",levelUpIcon:"arrow-left",onInit:function(){},onOpen:function(){},onClose:function(){}},p=e("body"),f=(e("#debug"),!1),g=0,v=null,h={},m={},C={},y=t.createElement("transEnd"),T={WebkitTransition:"webkitTransitionEnd",transition:"transitionend",MozTransition:"transitionend"},b=!1;s.prototype={init:function(){var n=this,t=e(this.element),i=this.settings;null==v&&(v=e(i.target)),"original"!=i.copyType&&t.addClass(i.hiddenClass),i.onInit(),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var n,t=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),Object.keys(h).length>=3||(g++,f||n._createTemplate(),null==m[i.side]?(n._addToggle(),"original"!=i.copyType&&(m[i.side]=n._cloneMenu(t),C[i.side]=m[i.side])):"original"!=i.copyType&&n._cloneMenu(t),"original"==i.copyType&&(t.addClass("offCanvasMenu offCanvasOriginal offCanvas-"+i.side),C[i.side]=t),b&&(d.add(C[i.side]).add(v.find("ul")).addClass("disableTranslate"),"original"==i.copyType&&t.addClass("disableTranslate")),h[i.side].toggle.off().on("click",function(){return n._toggleMenu(),!1}),null!=C[i.side]&&(C[i.side].find(".showChildren").off().on("click",function(n){var t=e(this).parent().siblings("ul");b&&t.animate({left:"0"},parseInt(i.animSpeed)),t.addClass("active").parents("ul").first().addClass("parentLevel");var s=parseInt(e(this).parentsUntil(v,"ul").length);return p.removeClass("active"+s).addClass("active"+(s+1)),n.stopPropagation(),!1}),C[i.side].find(".upalevel").children("i").off().on("click",function(n){var t=e(this).closest("ul");b?t.animate({left:"100%"},parseInt(i.animSpeed),function(){t.removeClass("active").parents("ul").first().removeClass("parentLevel")}):t.removeClass("active").parents("ul").first().removeClass("parentLevel");var s=parseInt(e(this).parentsUntil(v,"ul").length);return p.removeClass("active"+s).addClass("active"+(s-1)),n.stopPropagation(),!1})),p.find(".menu-overlay").add(o.menus).off().on("click touchend",function(e){null!=a&&n.closeMenu(a,l),e.stopPropagation()}),o.menus.children().on("click touchend",function(e){e.stopPropagation()}))},_createTemplate:function(){var n=this.settings;o={toggles:e("<div>",{id:"offCanvasToggles","class":"offCanvasToggles"}),menus:e("<div>",{id:"offCanvasMenus","class":"offCanvasMenus"}),overlay:e("<div>",{"class":"menu-overlay"})};var t;t=null==n.pushElems||""==n.pushElems||e(n.pushElems).length<1?v.next():e(n.pushElems),d=t.add(o.menus),t.prepend(o.overlay),v.prepend(o.menus),v.prepend(o.toggles),f=!0;for(var s in T)if(y.style[s]!==i){r=T[s];break}Modernizr.csstransforms3d&&Modernizr.csstransitions||(b=!0)},_cloneMenu:function(n){var t=this,i=this.settings,s=!1;if(null!=m[i.side]&&"nav"!=m[i.side].get(0).tagName.toLowerCase()&&(s=!0),null==m[i.side]||s){var a=n.clone();a.attr("id",a.attr("id")+i.idSuffix+"-"+i.side).removeClass(i.hiddenClass).addClass("offCanvasMenu "+(s?"":"offCanvas-"+i.side)+(i.move?" move":" clone")).find("ul").first().addClass("firstLevel").find("a").attr("tabindex","-1"),a.find("*[id]").each(function(){e(this).attr("id",e(this).attr("id")+i.idSuffix+"-"+i.side)}),t._addLevelUp(a,!0),"move"==i.copyType&&n.remove();var l=o.menus;return s&&(l=o.menus.children(".offCanvas-"+i.side)),a.appendTo(l),a}var a=n.find("ul").first().clone();a.find("a").attr("tabindex","-1"),a.find("*[id]").each(function(){e(this).attr("id",e(this).attr("id")+i.idSuffix+"-"+i.side)}),t._addLevelUp(a,!1),"move"==i.copyType&&n.remove();var d=m[i.side].find("ul").first();d.append('<li class="title">'+i.titleText+"</li>"),a.children("li").appendTo(d)},_addLevelUp:function(n,t){var i=this.settings;$uls=t?n.find("ul").find("ul"):n.find("ul"),$uls.each(function(){parentName=e(this).siblings("a").children(".middle").html(),e(this).prepend('<li class="upalevel"><i class="im icn-'+(""!=i.levelUpIcon?i.levelUpIcon:"arrow-left")+'" aria-hidden="true"></i><span class="childrenof">'+parentName+"</span></li>")})},_addToggle:function(){var n=this.settings,t=null!=n.toggleIcon?e("<i>",{"class":"icon im icn-"+n.toggleIcon}):e("<span>",{"class":"icon burgercross"});h[n.side]={toggle:e("<a>",{id:n.side,"class":"menuToggle "+n.side+"Toggle"}),icon:t,text:e("<span>",{"class":"text"})},null==n.toggleIcon&&h[n.side].icon.html("<span></span>"),h[n.side].text.html('<span class="inner">'+n.titleText+"</span>"),h[n.side].toggle.append(h[n.side].icon),n.iconOnly&&null!=h[n.side].text?h[n.side].toggle.attr("title",n.titleText).addClass("icon-only"):""!=h[n.side].text&&h[n.side].toggle.append(h[n.side].text),o.toggles.append(h[n.side].toggle)},_toggleMenu:function(){var e=this;null==a?e._openMenu(e,e.settings):null!=a&&a!=e?e.closeMenu(a,l,function(){e._openMenu(e,e.settings)}):e.closeMenu(a,l)},_openMenu:function(n,t){var i,s;if(null!=n?(i=n,s=t):(i=this,s=this.settings),a=i,l=s,p.addClass("menuOpen "+i.settings.side+"Menu"+("original"==s.copyType?" originalOpen":" clonedOpen")),h[s.side].toggle.addClass("open"),s.onOpen(),b){var o={},r=i.settings.menuWidth;if("left"==i.settings.side)o.marginLeft=r;else if("right"==i.settings.side)o.marginLeft="-"+r;else if("center"==i.settings.side){var c=e(i.element),u=-1*c.outerHeight();return c.css({bottom:"auto",top:u}),o.top="0",e(i.element).animate(o,parseInt(i.settings.animSpeed)),void 0}d.animate(o,parseInt(i.settings.animSpeed))}},closeMenu:function(n,t,i){var s,o;if(null!=n?(s=n,o=t):(s=this,o=this.settings),p.removeClass("menuOpen leftMenu rightMenu centerMenu clonedOpen originalOpen"),h[o.side].toggle.removeClass("open"),b){var c,u={};"center"==o.side?(c=e(s.element),u.top=-1*c.outerHeight()):(c=d,u.marginLeft=0),c.animate(u,parseInt(o.animSpeed)).promise().done(function(){s._closeSubLevels(),a=null,l=null,i&&i(),o.onClose()})}else"original"!=o.copyType?v.one(r,function(){s._closeSubLevels(),a=null,l=null,i&&i(),o.onClose()}):(s._closeSubLevels(),a=null,l=null,i&&i(),o.onClose())},_closeSubLevels:function(){var e=C[this.settings.side].find(".active");e.removeClass("active"),e.parents(".parentLevel").first().removeClass("parentLevel"),p.removeClass("active1 active2 active3 active4"),b&&e.css("left","100%")}},e[c]=e.fn[c]=function(n){var t=arguments;if(n===i||"object"==typeof n){if(this instanceof e)return this.each(function(){e.data(this,"plugin_"+c)||e.data(this,"plugin_"+c,new s(this,n))});e.extend(u,n)}else if("string"==typeof n&&"_"!==n[0]&&"init"!==n){var a;return this.each(function(){var i=e.data(this,"plugin_"+c);i instanceof s&&"function"==typeof i[n]&&(a=i[n].apply(i,Array.prototype.slice.call(t,1)))}),a!==i?a:this}}}(jQuery,window,document);