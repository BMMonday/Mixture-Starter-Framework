!function(t,e,i,n){function s(e,i){this.element=e,this.settings=t.extend({},r,i),this._defaults=r,this._name=l,this.init()}var l="extendMenu",r={breakpoint:980,title:"More",icon:"ellipsis",contentEl:null,maxWidth:null,onInit:function(){},onComplete:function(){}},a={},h={},d={},o=!1;s.prototype={init:function(){var i=this,n=(t(this.element),this.settings);i.pageResizing(),Modernizr.mq("only all")&&t(e).on("debouncedresize",function(){i.pageResizing()}),t(e).load(function(){o=!0,i.viewportWidth()>=n.breakpoint&&i.construct()})},pageResizing:function(){var e=this,i=t(this.element),n=this.settings,s=i.attr("id"),l=i.find("li").first().outerHeight(!0),s=i.attr("id");e.viewportWidth()>=n.breakpoint?(d[s]||i.css({overflow:"hidden",height:l}),n.onInit(),null==d[s]&&(d[s]=!1),!d[s]&&o&&e.construct()):i.css({overflow:"visible",height:"auto"})},construct:function(){var e=this,i=t(this.element),n=this.settings,s=i.attr("id");e.createMenuItemTemplate(),h[s].append(e.excessItems()),i.css({overflow:"visible",height:"auto"}),d[s]=!0,n.onComplete(),i.find("a").focus(function(){t(this).parents("li").addClass("emhover")}).blur(function(){t(this).parents("li").removeClass("emhover")}),Modernizr.touch&&(i.find("li").not(".excessLinks").has("> ul").each(function(){if(t(this).find(".cloned").length<1&&"#"!=t(this).children("a").attr("href")){var e=t(this).clone();e.addClass("cloned").children("ul").add(e.children("a").children(".right")).remove(),t(this).children("ul").prepend(e)}}).on("click",function(){return!1}),i.find("ul").on("click",function(t){t.stopPropagation()}))},createMenuItemTemplate:function(){var e=t(this.element),i=this.settings,n=e.attr("id");h[n]=e.find("ul").first(),a[n]=t(h[n].children("li").first().clone()),a[n].addClass("hasIcon hasChildren rightAligned excessLinks").removeClass("current parent"),a[n].find("ul").length>0&&a[n].find("ul").remove(),a[n].children("a").removeClass("current parent").removeAttr("href"),a[n].find(".right").remove(),a[n].find(".middle").text(i.title).addClass("hidden"),a[n].find(".left").children("i").length>0?a[n].find(".left").children("i").removeClass().addClass("im icn-"+i.icon):a[n].find(".left").length>0?a[n].find(".left").html('<i class="im icn-'+i.icon+'" aria-hidden="true"></i>'):a[n].children("a").html('<span class="left"><i class="im icn-'+i.icon+'" aria-hidden="true"></i></span>')},measureExtendItem:function(){var e=t(this.element),i=(this.settings,e.attr("id"));h[i].append(a[i]);var n=h[i].children("li").last(),s=n.outerWidth(!0);return n.remove(),s},excessItems:function(){var e=this,i=t(this.element),n=this.settings,s=1,l=!1,r=i.attr("id"),d=h[r].children("li").length,o=0,c=null!=n.maxWidth&&n.maxWidth>0?n.maxWidth:t(this.element).outerWidth(!0),u=e.measureExtendItem(),f=0;h[r].children("li").has("ul").length>0&&(f=h[r].children("li").has("ul").first().children("ul").outerWidth());var p=a[r],m=t('<ul class="level2"></ul>'),g=null!=n.contentEl&&t(n.contentEl).length>0?t(n.contentEl).outerWidth(!1):c;return h[r].children("li").each(function(){o+=t(this).outerWidth(!0);var e=t(this).position(),i=0;if(t(this).children("ul").length>0){var n=1;t(this).find("ul:not(:has(ul))").each(function(){t(this).parentsUntil(r,"ul").size()>n&&(n=t(this).parentsUntil(r,"ul").size())}),i=n}d>s&&o+u>c||s==d&&o>c?(l=!0,t(this).hasClass("current")&&!p.hasClass("current")&&p.add(p.children("a")).addClass("current"),t(this).hasClass("parent")&&!p.hasClass("parent")&&p.add(p.children("a")).addClass("parent"),m.append(t(this).clone()),t(this).remove()):e.left+f*i>g&&t(this).addClass("rightAligned"),s++}),m.find("ul").each(function(){var e=t(this).attr("class"),i=e.replace(/[0-9]/g,""),n=e.replace(/[A-Za-z$-]/g,"");t(this).removeClass(e).addClass(i+(parseInt(n)+1).toString())}),p.append(m),l?p:null},viewportWidth:function(){var t=e,n="inner";return"innerWidth"in e||(n="client",t=i.documentElement||i.body),t[n+"Width"]}},t[l]=t.fn[l]=function(e){var i=arguments;if(e===n||"object"==typeof e){if(this instanceof t)return this.each(function(){t.data(this,"plugin_"+l)||t.data(this,"plugin_"+l,new s(this,e))});t.extend(r,e)}else if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var a;return this.each(function(){var n=t.data(this,"plugin_"+l);n instanceof s&&"function"==typeof n[e]&&(a=n[e].apply(n,Array.prototype.slice.call(i,1)))}),a!==n?a:this}}}(jQuery,window,document);